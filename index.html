<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hand Tracking Ghost Room â€¢ A-Frame</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Basic page + scene styles -->
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: 'Arial', sans-serif;
        overflow: hidden;
      }
      a-scene {
        width: 100vw;
        height: 100vh;
      }

      /* Intro overlay (kept if you ever want to re-use it) */
      #intro-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.7);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 9999;
      }

    </style>

    <!-- Vite / bundler entry (imports 'aframe' inside main.js) -->
    <script type="module" src="/main.js"></script>
  </head>

  <body>
    <a-scene
      background="transparent"
      renderer="colorManagement: true; sortObjects: true; alpha: true"
      webxr="referenceSpaceType: local-floor; requiredFeatures: local-floor; optionalFeatures: hand-tracking, hit-test"
      vr-mode-ui="enabled: true"
      triangle-selector>


      <!-- Assets -->
      <a-assets>
        <!-- Intro images -->
        <img id="intro1" src="/images/intro1.png">
        <img id="intro2" src="/images/intro2.png">
        <img id="intro3" src="/images/intro3.png">
        <img id="intro4" src="/images/intro4.png">

        <!-- Room + ghost models (in /public) -->
        <a-asset-item id="room" src="/room.glb"></a-asset-item>
        <a-asset-item id="ghost" src="/ghost.glb"></a-asset-item>
      </a-assets>

      <!-- Camera + cursor (ray from center; hits .clickable) -->
      <a-entity id="rig" position="0 0 0">
          <a-camera position="0 1.6 0">
            <a-entity
              cursor="fuse: false"
              raycaster="objects: .clickable; recursive: true"
              position="0 0 -1"
              geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.015"
              material="color: white; shader: flat">
            </a-entity>
          </a-camera>
          
          <!-- Camera-relative intro panel (always centered in view) -->
          <a-entity id="intro-panel" position="0 1.6 -1.5" rotation="0 0 0">
            <a-plane
              id="intro-image-3d"
              width="1.8"
              height="1.1"
              material="src: #intro1; transparent: true; side: double">
            </a-plane>

            <a-plane
              id="intro-button-3d"
              class="clickable"
              position="0 -0.9 0"
              width="0.9"
              height="0.3"
              material="color: #2196F3"
              text="value: Next; align: center; color: #FFFFFF; width: 2">
            </a-plane>
          </a-entity>
      </a-entity>

    <!-- Hand tracking + raycasters to .clickable -->
    <!-- Hand tracking + raycasters to .clickable -->
    <a-entity
    id="leftHand"
    hand-tracking-controls="hand: left"
    raycaster="objects: .clickable; showLine: true; recursive: true">
    </a-entity>

    <a-entity
    id="rightHand"
    hand-tracking-controls="hand: right"
    raycaster="objects: .clickable; showLine: true; recursive: true">
    </a-entity>


    <!-- Rotated world content -->
    <a-entity id="world-root">
      <!-- Room model: will be auto-split into clickable parts by main.js -->
      <a-entity
        id="roomEntity"
        gltf-model="#room"
        position="0 0 0"
        rotation="0 90 0"
        scale="1 1 1">
      </a-entity>

      <!-- Basic lighting for the room / ghost -->
      <a-entity light="type: ambient; intensity: 0.6"></a-entity>
      <a-entity
        light="type: directional; intensity: 0.9"
        position="0 4 -2">
      </a-entity>
    </a-entity>
    </a-scene>
  </body>
</html>
